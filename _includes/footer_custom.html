<!-- Share Floating Button (—Å–ø—Ä–∞–≤–∞) -->
<div class="share-float">
  <button class="share-float-trigger" title="–ü–æ–¥–µ–ª–∏—Ç—å—Å—è">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
  </button>
  <div class="share-float-menu">
    <button class="share-btn share-copy" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
    </button>
    <a class="share-btn share-telegram" title="Telegram" target="_blank" rel="noopener">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
    </a>
    <a class="share-btn share-vk" title="VK" target="_blank" rel="noopener">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15.684 0H8.316C1.592 0 0 1.592 0 8.316v7.368C0 22.408 1.592 24 8.316 24h7.368C22.408 24 24 22.408 24 15.684V8.316C24 1.592 22.408 0 15.684 0zm3.692 17.123h-1.744c-.66 0-.864-.525-2.05-1.727-1.033-1-1.49-1.135-1.744-1.135-.356 0-.458.102-.458.593v1.575c0 .424-.135.678-1.253.678-1.846 0-3.896-1.118-5.335-3.202C4.624 10.857 4 8.684 4 8.244c0-.254.102-.491.593-.491h1.744c.44 0 .61.203.78.678.848 2.46 2.274 4.61 2.86 4.61.22 0 .322-.102.322-.66V9.721c-.068-1.186-.695-1.287-.695-1.71 0-.203.17-.407.44-.407h2.744c.373 0 .508.203.508.643v3.473c0 .372.17.508.271.508.22 0 .407-.136.814-.542 1.27-1.422 2.18-3.61 2.18-3.61.119-.254.322-.491.763-.491h1.744c.525 0 .644.27.525.643-.22 1.017-2.354 4.031-2.354 4.031-.186.305-.254.44 0 .78.186.254.796.779 1.203 1.253.745.847 1.32 1.558 1.473 2.05.17.49-.085.744-.576.744z"/></svg>
    </a>
    <a class="share-btn share-twitter" title="X/Twitter" target="_blank" rel="noopener">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg>
    </a>
  </div>
  <div class="share-copied">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</div>
</div>

<!-- Site Footer -->
<footer class="site-footer">
  <div class="footer-content">
    <div class="footer-license">
      <span class="footer-icon">üìú</span>
      <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener">CC BY 4.0</a> ¬∑ –î–º–∏—Ç—Ä–∏–π –ó–∞–π—Ü–µ–≤ (Dmitrii Zaitsev), 2026
    </div>
    <div class="footer-attribution">
      –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å—Å—ã–ª–∞–π—Ç–µ—Å—å –Ω–∞ <a href="https://dim-s.github.io/indie-gamedev-knowledge-base/">—Å–∞–π—Ç</a> –∏–ª–∏ <a href="https://github.com/dim-s/indie-gamedev-knowledge-base" target="_blank" rel="noopener">—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</a>
    </div>
    <div class="footer-contact">
      <span class="footer-icon">‚úâÔ∏è</span>
      <a href="mailto:d.zayceff@gmail.com">d.zayceff@gmail.com</a>
    </div>
  </div>
</footer>

<!-- Back to Top Button -->
<button class="back-to-top" aria-label="–ù–∞–≤–µ—Ä—Ö" title="–ù–∞–≤–µ—Ä—Ö">‚Üë</button>

<script>
document.addEventListener('DOMContentLoaded', function() {
  
  /* GitHub Alerts */
  var alertTypes = {
    'NOTE': { icon: '&#8505;&#65039;', cls: 'alert-note', color: '#0969da', label: '–ù–∞ –∑–∞–º–µ—Ç–∫—É' },
    'TIP': { icon: '&#128161;', cls: 'alert-tip', color: '#1a7f37', label: '–ü–æ–¥—Å–∫–∞–∑–∫–∞' },
    'IMPORTANT': { icon: '&#10071;', cls: 'alert-important', color: '#8250df', label: '–í–∞–∂–Ω–æ' },
    'WARNING': { icon: '&#9888;&#65039;', cls: 'alert-warning', color: '#9a6700', label: '–í–Ω–∏–º–∞–Ω–∏–µ' },
    'CAUTION': { icon: '&#128721;', cls: 'alert-caution', color: '#cf222e', label: '–û—Å—Ç–æ—Ä–æ–∂–Ω–æ' }
  };

  var blockquotes = document.querySelectorAll('blockquote');
  for (var i = 0; i < blockquotes.length; i++) {
    var bq = blockquotes[i];
    var firstP = bq.querySelector('p');
    if (!firstP) continue;
    
    var text = firstP.innerHTML;
    var match = text.match(/^\s*(\\?\[|&#91;)!((?:NOTE|TIP|IMPORTANT|WARNING|CAUTION))(\\?\]|&#93;)\s*/i);
    
    if (match) {
      var type = match[2].toUpperCase();
      var config = alertTypes[type];
      
      if (config) {
        firstP.innerHTML = text.replace(match[0], '');
        bq.className += ' gfm-alert ' + config.cls;
        bq.style.borderLeftColor = config.color;
        bq.style.backgroundColor = config.color + '10';
        
        var title = document.createElement('div');
        title.className = 'alert-title';
        title.innerHTML = '<span style="margin-right: 6px; font-size: 1.1em;">' + config.icon + '</span>' + 
                          '<span style="font-weight: 700; font-size: 0.9em; color: ' + config.color + ';">' + config.label + '</span>';
        title.style.display = 'flex';
        title.style.alignItems = 'center';
        title.style.marginBottom = '6px';
        title.style.lineHeight = '1.2';
        
        bq.insertBefore(title, firstP);
      }
    }
  }
  
  /* Table Wrapper ‚Äî –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –¥–ª—è —à–∏—Ä–æ–∫–∏—Ö —Ç–∞–±–ª–∏—Ü */
  var tables = document.querySelectorAll('.main-content table');
  for (var t = 0; t < tables.length; t++) {
    var table = tables[t];
    if (!table.parentElement.classList.contains('table-wrapper')) {
      var wrapper = document.createElement('div');
      wrapper.className = 'table-wrapper';
      table.parentNode.insertBefore(wrapper, table);
      wrapper.appendChild(table);
    }
  }
  
  /* Reading Time (–í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è) */
  var mainContent = document.querySelector('.main-content');
  var firstH1 = mainContent ? mainContent.querySelector('h1') : null;
  
  if (mainContent && firstH1) {
    var textContent = mainContent.textContent || mainContent.innerText;
    var wordCount = textContent.trim().split(/\s+/).length;
    var readingTime = Math.ceil(wordCount / 200); /* ~200 —Å–ª–æ–≤/–º–∏–Ω –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ */
    
    function pluralMinutes(n) {
      var abs = Math.abs(n) % 100;
      var n1 = abs % 10;
      if (abs > 10 && abs < 20) return '–º–∏–Ω—É—Ç';
      if (n1 > 1 && n1 < 5) return '–º–∏–Ω—É—Ç—ã';
      if (n1 === 1) return '–º–∏–Ω—É—Ç–∞';
      return '–º–∏–Ω—É—Ç';
    }
    
    var readingTimeEl = document.createElement('div');
    readingTimeEl.className = 'reading-time';
    readingTimeEl.innerHTML = '<span class="reading-time-icon">‚è±</span> ~' + readingTime + ' ' + pluralMinutes(readingTime) + ' —á—Ç–µ–Ω–∏—è';
    
    firstH1.parentNode.insertBefore(readingTimeEl, firstH1.nextSibling);
  }
  
  /* Share Floating Button */
  var shareFloat = document.querySelector('.share-float');
  if (shareFloat) {
    var pageUrl = encodeURIComponent(window.location.href);
    var pageTitle = encodeURIComponent(document.title);
    var trigger = shareFloat.querySelector('.share-float-trigger');
    var menu = shareFloat.querySelector('.share-float-menu');
    var copiedMsg = shareFloat.querySelector('.share-copied');
    
    var tgBtn = shareFloat.querySelector('.share-telegram');
    if (tgBtn) tgBtn.href = 'https://t.me/share/url?url=' + pageUrl + '&text=' + pageTitle;
    
    var vkBtn = shareFloat.querySelector('.share-vk');
    if (vkBtn) vkBtn.href = 'https://vk.com/share.php?url=' + pageUrl + '&title=' + pageTitle;
    
    var twBtn = shareFloat.querySelector('.share-twitter');
    if (twBtn) twBtn.href = 'https://twitter.com/intent/tweet?url=' + pageUrl + '&text=' + pageTitle;
    
    trigger.addEventListener('click', function() {
      shareFloat.classList.toggle('open');
    });
    
    var copyBtn = shareFloat.querySelector('.share-copy');
    if (copyBtn) {
      copyBtn.addEventListener('click', function() {
        navigator.clipboard.writeText(window.location.href).then(function() {
          copiedMsg.classList.add('visible');
          setTimeout(function() { copiedMsg.classList.remove('visible'); }, 1500);
        });
      });
    }
    
    document.addEventListener('click', function(e) {
      if (!shareFloat.contains(e.target)) {
        shareFloat.classList.remove('open');
      }
    });
  }
  
  /* Back to Top Button */
  var backToTopBtn = document.querySelector('.back-to-top');
  
  if (backToTopBtn) {
    var scrollThreshold = 400;
    
    function toggleBackToTop() {
      if (window.scrollY > scrollThreshold) {
        backToTopBtn.classList.add('visible');
      } else {
        backToTopBtn.classList.remove('visible');
      }
    }
    
    window.addEventListener('scroll', toggleBackToTop, { passive: true });
    
    backToTopBtn.addEventListener('click', function() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    
    toggleBackToTop();
  }
  
});

/* –ü–µ—Ä–µ–Ω–æ—Å —Ñ—É—Ç–µ—Ä–∞ –≤ —Å–∞–º—ã–π –Ω–∏–∑ (–ø–æ—Å–ª–µ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ —Ç–µ–º—ã) */
window.addEventListener('load', function() {
  setTimeout(function() {
    var footer = document.querySelector('.site-footer');
    var container = document.querySelector('.page-content') || document.querySelector('.main-content') || document.body;
    
    if (footer && container) {
      container.appendChild(footer);
      console.log('Footer moved to the absolute bottom');
      footer.style.display = 'block';
    }
  }, 100);
});
</script>
